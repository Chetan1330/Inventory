{% extends "layouts/base.html" %}
{% load static %}

{% load widget_tweaks %}
{% block title %} Dashboard {% endblock title %}

{% block content %}

<div class="row">
    <div class="col-12">
        <div class="card card-chart">
            <div class="card-header">
                <div class="row">
                    <div class="col-sm-6 text-left">
                        <h5 class="card-category">Stocks</h5>
                        <h2 class="card-title">Stocks Analysis</h2>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div id="chart-container"></div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'assets/js/core/jquery.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>

<script>
    $(document).ready(function () {
        var labels = JSON.parse(JSON.stringify({{ labels|safe }}));
        var stockval = JSON.parse(JSON.stringify({{ stockval|safe }}));
        var Stockin = JSON.parse(JSON.stringify({{ Stockin|safe }}));
        var stockout = JSON.parse(JSON.stringify({{ stockout|safe }}));
        var stockpending = JSON.parse(JSON.stringify({{ stockpending|safe }}));
        var stockreserved = JSON.parse(JSON.stringify({{ stockreserved|safe }}));

        // Create a Three.js scene
        var scene = new THREE.Scene();

        // Create a camera
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // Create a WebGL renderer
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById("chart-container").appendChild(renderer.domElement);

        // Create 3D geometries for your data (e.g., bars)
        // You'll need to adjust the positions and sizes based on your data
        var geometry1 = new THREE.BoxGeometry(1, Stockin[0], 1);
        var material1 = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        var cube1 = new THREE.Mesh(geometry1, material1);
        cube1.position.set(-2, 0, 0);
        scene.add(cube1);

        var geometry2 = new THREE.BoxGeometry(1, stockval[0], 1);
        var material2 = new THREE.MeshBasicMaterial({ color: 0x0000ff });
        var cube2 = new THREE.Mesh(geometry2, material2);
        cube2.position.set(2, 0, 0);
        scene.add(cube2);

        // Create labels (optional)
        var loader = new THREE.FontLoader();
        loader.load('path/to/your/font.json', function (font) {
            var textGeometry = new THREE.TextGeometry("Label 1", {
                font: font,
                size: 0.2,
                height: 0.05,
            });
            var textMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });
            var labelText = new THREE.Mesh(textGeometry, textMaterial);
            labelText.position.set(-2, -1, 0);
            scene.add(labelText);

            // Add more labels as needed
        });

        // Add interactivity (optional)

        // Render the scene
        var animate = function () {
            requestAnimationFrame(animate);

            // Rotate the chart or perform other animations here

            renderer.render(scene, camera);
        };

        animate();
    });
</script>

{% endblock content %}
